<div class="main-header" style=" top:0px;">

    <div class="logo-header" data-background-color="blue">

        <a [href]="" class="logo">
            <img src="../../../assets/img/Vitutor-logo.svg" alt="navbar brand" class="navbar-brand">
        </a>
        <button class="navbar-toggler sidenav-toggler ml-auto" type="button" data-toggle="collapse" data-target="collapse" aria-expanded="false" aria-label="Toggle navigation" (click)="menuToggle()">
            <span class="navbar-toggler-icon">
                <img src="../../../assets/img/menu-icon.svg" alt="menu icon" class="menu-icon">
            </span>
        </button>
        <button class="topbar-toggler more" (click)="toggleNav = !toggleNav"><i class="icon-options-vertical" ></i></button>
        <div class="nav-toggle">
            <button class="btn btn-toggle toggle-sidebar" (click)="menuToggle()">
                <img src="../../../assets/img/menu-icon.svg" alt="menu icon" class="menu-icon">
            </button>
        </div>
    </div>
    <!-- End Logo Header -->

    <!-- Navbar Header -->
    <nav class="navbar navbar-header navbar-expand-lg"  [ngClass]="{'mobile-nav': toggleNav}" data-background-color="blue2">

        <div class="container-fluid">
            <div class="collapse" id="search-nav">
                <form class="navbar-left navbar-form nav-search mr-md-3">
                    <!-- <div class="ng-autocomplete"> -->
                    <div class="input-group">

                        <img src="../../../assets/img/search_icon.svg" alt="menu icon" class="search-icon">
                        <!-- <input type="text" placeholder="Search a tutor" class="form-control" id="search"> -->
                        <!-- <datalist id="categories">
                            <option *ngFor="let category of categoriesLists">{{category.display_name}}</option>
                        </datalist> -->
                        <ng-autocomplete #auto placeHolder="Enter a subject" class="form-control" [data]="categoriesLists" [searchKeyword]="keyword" (selected)='selectEvent($event)' [itemTemplate]="itemTemplate" (inputCleared)="searchCleared()" [notFoundTemplate]="notFoundTemplate" [minQueryLength]="3"
                                     [initialValue]="initialValue" (inputChanged)="textChange($event)">
                                </ng-autocomplete>
                                <ng-template #itemTemplate let-item>
                                    <a [innerHTML]="item.display_name"></a>
                                </ng-template>

                                <ng-template #notFoundTemplate let-notFound>
                                    <div [innerHTML]="notFound"></div>
                                </ng-template>
                        <div class="input-group-prepend">
                            <button class="btn btn-red" (click)="redirectTo()" >Search</button>
                        </div>
                        </div>
                    <!-- </div> -->
                </form>
            </div>
            <ul class="navbar-nav topbar-nav ml-md-auto align-items-center">
                <li class="nav-item toggle-nav-search hidden-caret">
                    <a class="nav-link" data-toggle="collapse" href="#search-nav" role="button" aria-expanded="false" aria-controls="search-nav">
                        <i class="fa fa-search"></i>
                    </a>
                </li>
                <li class="nav-item dropdown hidden-caret">
                    <div class="timeZone" > Time Zone : <span>{{timeZone}}</span></div>
                    

                </li>
                <li class="nav-item dropdown hidden-caret">
                    <a class="nav-link dropdown-toggle" routerLink="/student/message-board" id="messageDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <img src="../../../assets/img/messageDropdown.svg" alt="messageDropdown" class="messageDropdown">
                    </a>

                </li>
                <li class="nav-item dropdown hidden-caret">
                    <a class="nav-link dropdown-toggle" href="#" id="notifDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <img src="../../../assets/img/notifDropdown.svg" alt="notifDropdown" class="notifDropdown">
                        <span class="notification" *ngIf="totalNotificationCount && totalNotificationCount > 0">{{totalNotificationCount}}</span>
                    </a>
                    <ul class="dropdown-menu notif-box animated fadeIn" aria-labelledby="notifDropdown">
                        <li>
                            <div class="dropdown-title">showing {{notificationList.length}} new notification</div>
                        </li>
                        <li>
                            <div class="scroll-wrapper notif-scroll scrollbar-outer">
                                <div class="notif-scroll scrollbar-outer scroll-content scroll-scrolly_visible" *ngIf="notificationList.length > 0">
                                    <div class="notif-center" *ngFor="let notification of notificationList">
                                        <a (click)="redirect(notification)" [ngClass]="{'read_notify' : notification.status == 0}">
                                            <div class="notif-icon notif-primary"> <i class="fa fa-user-plus"></i> </div>
                                            <div class="notif-content" style="flex:1">
                                                <span class="block" >
                                                    {{notification.notification}}
                                                </span>
                                                <!-- <span class="time">5 minutes ago</span> -->
                                            </div>
                                        </a>
                                        <!-- <a href="#">
                                            <div class="notif-icon notif-success"> <i class="fa fa-comment"></i> </div>
                                            <div class="notif-content">
                                                <span class="block">
                                                    Rahmad commented on Admin
                                                </span>
                                                <span class="time">12 minutes ago</span>
                                            </div>
                                        </a>
                                        <a href="#">
                                            <div class="notif-img">
                                                <img src="https://via.placeholder.com/50" alt="Img Profile">
                                            </div>
                                            <div class="notif-content">
                                                <span class="block">
                                                    Reza send messages to you
                                                </span>
                                                <span class="time">12 minutes ago</span>
                                            </div>
                                        </a>
                                        <a href="#">
                                            <div class="notif-icon notif-danger"> <i class="fa fa-heart"></i> </div>
                                            <div class="notif-content">
                                                <span class="block">
                                                    Farrah liked Admin
                                                </span>
                                                <span class="time">17 minutes ago</span>
                                            </div>
                                        </a> -->
                                    </div>
                                </div>
                                <div class="notif-scroll scrollbar-outer scroll-content scroll-scrolly_visible" *ngIf="notificationList.length == 0">
                                    <div class="notif-center" >
                                        <a [href]="">
                                            <div class="notif-icon notif-primary"> <i class="fa fa-user-plus"></i> </div>
                                            <div class="notif-content">
                                                <span class="block">
                                                   No New Notification
                                                </span>
                                                <!-- <span class="time">5 minutes ago</span> -->
                                            </div>
                                        </a>
                                        </div>
                                        </div>
                            </div>
                        </li>
                        <li>
                            <a class="see-all" [routerLink]="['notification']">See all notifications<i class="fa fa-angle-right"></i> </a>
                        </li>
                    </ul>
                </li>
                <li class="nav-item dropdown hidden-caret">
                    <a class="dropdown-toggle profile-pic" data-toggle="dropdown" href="#" aria-expanded="false">
                        <div class="avatar-sm">
                            <img *ngIf="userInfo.photo" #this [src]="userInfo.photo" alt="..." class="avatar-img rounded-circle" onerror="this.src == 'assets/img/avatar_user2.jpg'">
                            <img *ngIf="!userInfo.photo" src="assets/img/avatar_user2.jpg" #image alt="..." class="avatar-img rounded-circle">
                        </div>
                        <div class="avt_txt">
                            <span>{{userInfo.first_name}} {{userInfo.last_name}} </span>
                            <img src="../../../assets/img/arrow_down.svg">
                        </div>
                    </a>
                    <ul class="dropdown-menu dropdown-user animated fadeIn">
                        <div class="dropdown-user-scroll scrollbar-outer">
                            <li>
                                <a class="dropdown-item" [routerLink]="['./student-profile']">Manage Profile</a>
                            </li>
                            <li>
                                <a class="dropdown-item" [routerLink]="['./account-setting']">Account Settings</a>
                            </li>
                            <!-- <li>
                                <a class="dropdown-item" (click)="showModal()">show Modal</a>
                            </li> -->
                            <li>
                                <a class="dropdown-item logout_btn" (click)="onLogout()"><img #this [src]="imageSrc" onError="this.src = 'assets/img/user.png'"> Logout</a>
                            </li>
                        </div>
                    </ul>
                </li>
            </ul>
        </div>
    </nav>
    <!-- End Navbar -->
</div>

<div id="earlySession" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div  class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Start Session Early</h4>
                <button type="button" class="close" data-dismiss="modal" ><img src="assets/img/images/close-14.svg"></button>
            </div>
            <div class="modal-body">
             
                <div class="col-lg-12 ">
                 <p> Tutor wants to start the following session early</p>
                <p><strong>Session Name: </strong> {{earlySessionObj?.job_title}}</p>
                <p><strong>Tutor Name: </strong> {{earlySessionObj?.full_name}}</p>
                <p><strong>Scheduled Date: </strong> {{earlySessionObj?.schedule_date}}</p>
                <p *ngIf="earlySessionObj?.notification_message && earlySessionObj?.notification_message.length > 0"><strong>Tutor's Message: </strong> {{earlySessionObj?.notification_message}}</p>               
                <!-- <p *ngIf="earlySessionObj?.schedule_date">{{earlySessionObj.schedule_date}}</p> -->
               </div>
               <div class="col-lg-12 ">
                <label><strong> Message </strong></label>
                <textarea placeholder="Enter Message"  #reason class="form-control" name="review" rows="3"></textarea>
                <!-- <p *ngIf="earlyReasonErr == true" class="text-danger">Reason is required </p> -->
            </div>
                <div class="col-lg-12 text-center">
                    <button class="btn btn-orange mr-3" (click)="earlySessionResponse('reject',reason.value)">Reject</button>
                    <button class="btn btn-primary" (click)="earlySessionResponse('accept',reason.value)">Accept</button>

                </div>
            </div>
        </div>
    </div>
</div>

<div id="joinSession" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div  class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Join Session</h4>
                <button type="button" class="close" data-dismiss="modal" ><img src="assets/img/images/close-14.svg"></button>
            </div>
            <div class="modal-body">
                <div class="col-lg-12 ">
                 <p> Tutor has started the following session</p>
                <p><strong>Session Name: </strong> {{joinSessionObj?.job_title}}</p>
                <p><strong>Tutor Name: </strong> {{joinSessionObj?.full_name}}</p>
                <p *ngIf="joinSessionObj?.notification_message && joinSessionObj?.notification_message.length > 0"><strong>Tutor's Message: </strong> {{joinSessionObj?.notification_message}}</p> 

                <!-- <p><strong>Scheduled Date: </strong> {{earlySessionObj?.schedule_date}}</p> -->
               <!-- <p *ngIf="earlySessionObj?.schedule_date">{{earlySessionObj.schedule_date}}</p> -->
               </div>
              
                <div class="col-lg-12 text-center">
                    <button class="btn btn-red mr-3" (click)="joinSession()">Join Session</button>
                    

                </div>
            </div>
        </div>
    </div>
</div>